<div class="grid">
  <div class="col-12 lg:col-8 lg:col-offset-2">
    <p-card *ngIf="!loading" [formGroup]="form"
            [header]="!form?.get('id')?.value ? 'Νέος φοιτητής' : 'Επεξεργασία φοιτητή'">

      <!--      <div class="field grid">-->
      <!--        <label class="col-2" for="author">Σπουδές</label>-->
      <!--        <div class="col-4" *ngIf="$authorList | async as authorList; else loadingList">-->
      <!--          <p-dropdown [options]="authorList" [showClear]="true" placeholder="Συντάκτης" [virtualScroll]="true"-->
      <!--                      [filter]="true"-->
      <!--                      [filterBy]="'name'"-->
      <!--                      class="p-inputtext-sm w-full" [editable]="true" [optionValue]="'cd'" [optionLabel]="'name'"-->
      <!--                      formControlName="author" id="author">-->
      <!--          </p-dropdown>-->
      <!--        </div>-->
      <!--      </div>-->

      <!--          <div class="field grid">-->
      <!--            <label class="col-2" for="formation">Σχηματισμός</label>-->
      <!--            <div *ngIf="$formationList | async as formationList; else loadingList" class="col-8">-->
      <!--              <p-dropdown [options]="formationList" [showClear]="true" placeholder="Σχηματισμός"-->
      <!--                          class="p-inputtext-sm w-full" [filter]="true" emptyFilterMessage="Χωρίς αποτέλεσμα"-->
      <!--                          formControlName="formation"-->
      <!--                          id="formation" optionLabel="description"-->
      <!--              ></p-dropdown>-->
      <!--            </div>-->
      <!--          </div>-->

      <div class="field grid">
        <label class="col-2" for="studentName">Όνομα</label>
        <div class="col-10">
          <input class="p-inputtext-sm w-full" formControlName="studentName" id="studentName"
                 placeholder="Όνομα"
                 pInputText
                 type="text">
        </div>
      </div>

      <ng-template pTemplate="footer">
        <p-button (onClick)="onSubmit()" [disabled]="form.invalid || form.untouched"
                  [icon]="!saving ? 'pi pi-check' : 'pi pi-spin pi-spinner'"
                  label="Αποθήκευση">
        </p-button>
        <p-button (onClick)="onClear()" [disabled]="form.untouched" [style]="{'margin-left': '.5em'}"
                  [icon]="!form?.get('id')?.value ?  'pi pi-trash' : 'pi pi-refresh'"
                  [label]="!form?.get('id')?.value ? 'Καθαρισμός': 'Επαναφορά'"
                  styleClass="p-button-secondary">
        </p-button>
      </ng-template>

    </p-card>

    <p-card *ngIf="loading">
      <div class="mb-1 col-5">
        <p-skeleton height="2rem" width="100%"></p-skeleton>
        <div class="m-1"></div>
        <p-skeleton height="1rem" width="100%"></p-skeleton>
      </div>
      <div class="mb-1 col-7">
        <p-skeleton height="2.5rem" width="100%"></p-skeleton>
      </div>
      <div class="mb-1 col-12">
        <p-skeleton height="2.5rem" width="100%"></p-skeleton>
      </div>
    </p-card>
  </div>

  <p-dialog [(visible)]="successModal" [draggable]="false" [modal]="true" [resizable]="false"
            [style]="{width: '20vw'}" header="Επιτυχία">
    <p class="m-0">Η καταχώριση ολοκληρώθηκε με επιτυχία.</p>
    <ng-template class="p-0" pTemplate="footer">
      <p-button (click)="successModal=false" icon="pi pi-check" label="Ok" styleClass="p-button-text"></p-button>
    </ng-template>
  </p-dialog>
  <p-dialog [(visible)]="errorModal" [draggable]="false" [modal]="true" [resizable]="false"
            [style]="{width: '25vw'}" header="Αποτυχία">
    <p class="m-0">Παρουσιάστηκε πρόβλημα στη καταχώριση. Παρακαλώ επικοινωνήστε με τους διαχειριστές του
      συστήματος.</p>
    <ng-template class="p-0" pTemplate="footer">
      <p-button (click)="errorModal=false" icon="pi pi-check" label="Ok" styleClass="p-button-text"></p-button>
    </ng-template>
  </p-dialog>
</div>

<ng-template #loadingList>
  <div class="col-8">
    <p-skeleton height="2rem" styleClass="mb-2"></p-skeleton>
  </div>
</ng-template>
